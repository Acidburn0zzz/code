<?xml version="1.0" ?>
<!--
URL:    http://www.neutron.anl.gov/nexus/xml/NXsimulation.xml
Editor: farhi on pcfarhi <farhi@ill.fr>
$Id$

Instrument definition for simulation of an instrument 
(McStas,Vitess,ResTrax, NISP)

One 'instrument' entry may contain one or more instances of 'simulation' entries
I also recommand to add to all sections the following tag/values
  <name>{name of the section (redundent with name attribute)}</name>
  <parent>{name of the parent section (upper level)}</parent>
which both facilitates the data browsing

If data is not included in the file, it may be specified
as an URL to an external file, that should contain the
data (signal, errors, events) as an XML or other format
The data from simulations is often regularly spaced, thus
I suggest to have a 'range' attribute enabling to define
an axis as min/max/bins.

One simulation entry may contain any number of 'NXcomponent'
each of them having one or more NXdata inside

All the values, when not specified, are 
char strings, NX_INT64 or NX_FLOAT64

-->
<NXroot 
  NeXus_version="{Version of NeXus API}" 
  file_name="{Name of this file when originally created}"
  file_time="{Time when this file was originally created}">
  
  <NXentry name="{Name and version of the simulation program used}">
    <start_time type="ISO8601">{Starting time of measurement}</start_time>
    <end_time type="ISO8601">{Ending time of measurement}</end_time>
    <NXinstrument name="{Name of the simulated instrument}">
      <Parameters>{Description of parameters given as a list of 'variable_name (type)'}</Parameters>
      <Source>{Name of the file(s) containing the instrument description}</Source>
      <NXsimulation name="{Name of the simulation instance, using that instrument}">
        <Date>{Start date of the simulation}</Date>
        <Ncount>{Number of generated neutrons}</Ncount>
        <Gravitation>{yes|no}</Gravitation>
        <NXparameters name="parameters">
          <{parameter_name}>{parameter value}</{parameter_name}>
        </NXparameters>
        <NXcomponent name="{name of the instrument part/component}">
          <name>{name of the instrument part/component}</name>
          <parent>{Name of the simulation instance}</parent>
          <NXdata name="{Name of the data file}">
            <type>{array_0d|array_1d(dim)|array_2d(dim1, dim2)}</type>
            <title>{Title/description of the data}</title>
            <ratio>{simulation ratio (0=start, 1=end) when the data was issued}</ratio>
            <filename>{file name, may be an URL}</filename>
            <format>{file format, e.g. XML, Scilab, binary float, double ...}</format>
            <statistics>X0={mean value}; dX={2nd moment}; Y0={mean value}; dY={2nd moment};</statistics>
            <signal>Min={min value of signal}; Max={max value of signal}; Mean={mean of signal};</signal>
            <values>{integrated intensity} {error on integrated intensity} {number of events recorded}</values>
            <xvar>{X axis variable}</xvar>
            <yvar>{Y axis variable}</yvar>
            <xlabel>{X axis label (possibly with unit)}</xlabel>
            <ylabel>{Y axis label (possibly with unit)}</ylabel>
            <zvar>{Signal variable, usually 'I'}</zvar>
            <zlabel>{Signal label, short title (possibly with unit)}</zlabel>
            <xylimits>{6 values for xmin, xmax, ymin, ymax}</xylimits>
            <variables>{name of relevant variables, usually I I_err N}</variables>
            <{id1|2|3} 
              long_name="{label for axis 1|2|3, with unit}" 
              axis="1|2|3" primary="1" 
              min="{min value}" max="{max value}" dims="{number of bins}" 
              range="{1 when the data is given as a range, with min/max/bins, 0 otherwise}">
            </{id1|2|3}>
            <data long_name="{Title}" signal="1"  axis="[{id1},{id2}]" file_name="{file name, may be an URL}">{if nothing, then should lookfor the file}</data>
            <errors>{statistical errors on each data cell}</errors>
            <monitor>number of events recorded on each data cell}</monitor>
          </NXdata>
        </NXcomponent>
      </NXsimulation>
    </NXinstrument>
  </NXentry>
</NXroot>
